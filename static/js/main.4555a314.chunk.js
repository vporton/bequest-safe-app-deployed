(this["webpackJsonpbequest-safe-app"]=this["webpackJsonpbequest-safe-app"]||[]).push([[0],{385:function(e,t){},408:function(e,t){},410:function(e,t){},480:function(e,t){},482:function(e,t){},514:function(e,t){},519:function(e,t){},521:function(e,t){},528:function(e,t){},541:function(e,t){},628:function(e,t,n){"use strict";n.r(t);var r=n(12),s=n(0),c=n.n(s),a=n(22),o=n.n(a),i=n(73),u=n(25),l=n(145),d=n.n(l),b=n(146),j=n(304),h=n(305);function f(){var e=Object(b.a)(["\n    html {\n        height: 100%\n    }\n\n    body {\n       height: 100%;\n       margin: 0px;\n       padding: 0px;\n    }\n\n    #root {\n        height: 100%;\n        padding-right: 0.5rem;\n    }\n\n    .MuiFormControl-root,\n    .MuiInputBase-root {\n        width: 100% !important;\n    }\n\n    @font-face {\n        font-family: 'Averta';\n        src: local('Averta'), local('Averta Bold'),\n        url(",") format('woff2'),\n        url(",") format('woff');\n    }\n"]);return f=function(){return e},e}var O=Object(i.createGlobalStyle)(f(),j.a,h.a),x=n(29),p=n.n(x),m=n(147),w=n(45),y=n(306),v=n.n(y),g=n(80),S=n(308),T=(n(620),n(621),Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_RPC_TOKEN||"badb730a7c19420ea4f2aa50476afddd"),k={xdai:"0xdC19Ec5840857678FF618451257B9F58e77D2D3E",bsc:"0x33B973F1c37755356372315C1eae7505ad96e054",rinkeby:"0x67A212EEC9E3048bCAA0450a68Ed9cD7c01Ce4dF",bsctest:"0x1B377121434Bc726a76bC0A4E3cDf021fDb02A0b"},A={xdai:"0x63Ef7308e488D7b412972d6C20e3802373809281",bsc:"",rinkeby:"0x5C1163Fe686354853474105eDf256C0a847f9878",bsctest:"0x1B377121434Bc726a76bC0A4E3cDf021fDb02A0b"};function E(){var e=Object(b.a)(["\n  margin-bottom: 2rem;\n  width: 100%;\n  max-width: 480px;\n\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-column-gap: 1rem;\n  grid-row-gap: 1rem;\n"]);return E=function(){return e},e}var C="0x0000000000000000000000000000000000000000",D=i.default.form(E()),R=function(){var e=Object(l.useSafeAppsSDK)(),t=e.sdk,n=e.safe,c=Object(s.useState)(),a=Object(w.a)(c,2),o=a[0],i=a[1],d=Object(s.useState)(!1),b=Object(w.a)(d,2),j=b[0],h=b[1],f=Object(s.useState)(!1),O=Object(w.a)(f,2),x=O[0],y=O[1],E=Object(s.useState)(null),R=Object(w.a)(E,2),B=R[0],F=R[1],N=Object(s.useState)(),z=Object(w.a)(N,2),q=z[0],I=z[1],P=Object(s.useState)(""),_=Object(w.a)(P,2),L=_[0],H=_[1],Y=Object(s.useState)(null),M=Object(w.a)(Y,2),U=M[0],W=M[1],K=Object(s.useState)(""),G=Object(w.a)(K,2),$=G[0],V=G[1],J=Object(s.useState)(null),Q=Object(w.a)(J,2),X=Q[0],Z=Q[1],ee=Object(s.useState)(0),te=Object(w.a)(ee,2),ne=te[0],re=te[1];Object(s.useEffect)((function(){if(n){y(!1);var e="bsc"===n.network.toLowerCase()?"https://bsc-dataseed.binance.org/":"https://".concat(n.network,".infura.io/v3/").concat(T),t=new v.a(e);i(t)}}),[n]),Object(s.useEffect)((function(){function e(){return(e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("./abi/BequestModule.json");case 3:return t=e.sent,e.t0=I,e.next=7,t.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(0),console.error(e.t2);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}o&&function(){e.apply(this,arguments)}()}),[o]);var se=function(){var e=Object(m.a)(p.a.mark((function e(){var t,r,s,c,a,i,u,l;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&q&&n.safeAddress){e.next=2;break}return e.abrupt("return");case 2:if(console.log("Fetching bequest information..."),e.prev=3,t=A?A[n.network.toLowerCase()]:null,F(t),r=k[n.network.toLowerCase()],h(void 0===r),!j){e.next=10;break}return e.abrupt("return");case 10:return s=new o.eth.Contract(q,r),e.next=13,Promise.all([s.methods.heirs(n.safeAddress).call(),s.methods.bequestDates(n.safeAddress).call()]);case 13:c=e.sent,a=Object(w.a)(c,2),i=a[0],u=a[1],H(i),l=0!==u?new Date(1e3*u):new Date,W(l),V(L),Z(l),re(i===C||i===B?0:1),y(!0),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(3),console.error(e.t0);case 29:case"end":return e.stop()}}),e,null,[[3,26]])})));return function(){return e.apply(this,arguments)}}();function ce(e,r){var s=k[n.network.toLowerCase()],c=[{to:s,value:0,data:new o.eth.Contract(q,s).methods.setBequest(e,r.getTime()/1e3).encodeABI()}];function a(){return(a=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.txs.send({txs:c,params:{}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0.message);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}function ae(){try{return 0===ne?B:$?o.utils.toChecksumAddress($):""}catch(e){return C}}return Object(s.useEffect)((function(){se()}),[o,n.safeAddress,q,j,n.network]),Object(r.jsxs)(D,{children:[Object(r.jsx)(u.Title,{size:"md",children:"Bequest your wallet or funds"}),Object(r.jsx)(u.Text,{color:"error",size:"md",children:"Contracts were tested, but not audited. Use at your own risk! NO ANY WARRANTY EVEN THE IMPLIED ONE! BY USING THIS APP YOU AGREE FOR NO COMPENSATION FOR ANY LOSS BECAUSE OF ANY ERRORS IN THE APP OR ASSOCIATED SMART CONTRACTS OR ANY OTHER SOFTWARE FAILURES!"}),Object(r.jsx)("div",{style:{display:j?"block":"none"},children:Object(r.jsxs)(u.Text,{color:"error",size:"lg",children:["This Ethereum network (",n.network,") is not supported."]})}),Object(r.jsx)("div",{style:{display:x?"none":"block"},children:Object(r.jsx)(u.Loader,{size:"md"})}),Object(r.jsxs)("div",{style:{display:x?"block":"none"},children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Current heir:"})," ",Object(r.jsxs)("span",{style:{display:L&&!/^0x0+$/.test(L)?"inline":"none"},children:[Object(r.jsxs)("span",{style:{display:L!==B?"inline":"none"},children:[L," ",Object(r.jsx)(u.EtherscanButton,{value:L,network:n.network})]}),Object(r.jsx)("span",{style:{display:L===B?"inline":"none"},children:Object(r.jsx)("em",{children:"(science, software, and other common goods)"})}),Object(r.jsx)("br",{}),"Can be taken after: ",U?String(U):""]})," ",Object(r.jsx)("span",{style:{display:L&&!/^0x0+$/.test(L)?"none":"inline"},children:Object(r.jsx)("em",{children:"(none)"})})]}),Object(r.jsxs)(u.Text,{size:"lg",children:["Allow to take your funds by the heir after:"," ",null!==X&&($&&!/^0x0+$/.test($)||0!==X.getTime())?String(X):""]}),Object(r.jsx)(S.a,{value:X,onChange:function(e){return Z(e)},minDate:new Date,defaultView:null===X?"decade":void 0}),Object(r.jsx)(u.Text,{color:"error",size:"lg",children:"(Be sure to update this date periodically to ensure the heir doesn't take funds early!)"}),Object(r.jsx)(u.Text,{size:"lg",children:"Heir:"}),Object(r.jsxs)(g.d,{selectedIndex:ne,onSelect:function(e){return re(e)},children:[Object(r.jsxs)(g.b,{children:[Object(r.jsx)(g.a,{children:"Science, free software, common gooods"}),Object(r.jsx)(g.a,{children:"Custom address"})]}),Object(r.jsxs)(g.c,{children:[Object(r.jsxs)(u.Text,{size:"md",children:["Your bequest will be automatically delivered to best scientists,"," ","software developers, open access publishers, carbon accounters, and other common goods,"," ","selected by software and free market."]}),Object(r.jsxs)(u.Text,{size:"md",children:["We use a mathematical operation similar to money transfer from the future"," ","(Think about prediction markets and credits.)"," ","for them to get money before your bequest is withdrawn."]}),Object(r.jsxs)(u.Text,{size:"md",children:["See ",Object(r.jsx)("a",{rel:"noopener noreferrer",target:"_blank",href:"https://vporton.github.io/future-salary/",children:"Future Salaries"})," about how money is used."]}),Object(r.jsx)(u.Text,{size:"md",color:"error",children:"Currenly common good bequests work only on xDai network."})]}),Object(r.jsxs)(g.c,{children:[Object(r.jsx)(u.TextField,{label:"The heir",value:$,onChange:function(e){return V(e.target.value)}}),Object(r.jsxs)(u.Text,{size:"lg",children:["The heir can be a user account or a contract, such as another Gnosis Safe.",Object(r.jsx)("br",{}),"There is no software to take a bequest, yet. Surely, it will be available in the future."]})]})]}),Object(r.jsxs)("p",{children:[Object(r.jsx)(u.Button,{style:{display:""!==ae()&&!/^0x0+$/.test(ae())&&X&&0!==X.getTime()?"inline":"none"},size:"md",color:"primary",variant:"contained",onClick:function(e){return function(e,t){t&&0!==t.getTime()?ce(e,t):alert("This app has zero bequest date bug! I'm doing nothing for your safety.")}(ae(),X)},children:"Set bequest date and heir!"})," ",Object(r.jsx)(u.Button,{size:"md",color:"primary",variant:"contained",onClick:function(e){return ce(C,new Date(0))},children:"Cancel bequest!"})]})]}),Object(r.jsx)(u.Text,{size:"sm",children:Object(r.jsx)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/vporton/bequest-safe-app",children:"App source code"})})]})};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsxs)(i.ThemeProvider,{theme:u.theme,children:[Object(r.jsx)(O,{}),Object(r.jsx)(d.a,{children:Object(r.jsx)(R,{})})]})}),document.getElementById("root"))}},[[628,1,2]]]);
//# sourceMappingURL=main.4555a314.chunk.js.map